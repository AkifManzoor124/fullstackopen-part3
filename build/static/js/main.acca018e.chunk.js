(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),l=(t(19),t(2)),c=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{onChange:function(n){e.setFilter(n.target.value)}})))},s=t(3),i=t.n(s),m="/api/persons",f=function(){return i.a.get(m).then((function(e){return e.data}))},b=function(e){return i.a.post(m,e).then((function(e){return e.data}))},d=function(e,n){return i.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},p=function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(n){if(n.preventDefault(),-1===e.persons.findIndex((function(n){return n.name===e.newName})))e.setPersons(e.persons.concat({name:e.newName,number:e.newNumber})),e.setNewName(""),e.setNumber(""),b({name:e.newName,number:e.newNumber}).then((function(e){console.log(e)})),e.setMessage("Added: "+e.newName);else{var t=window.confirm(e.newName+" is already in the phonebook. Would you like to replace the old number with the new one?"),a=e.persons.find((function(n){return e.newName===n.name}));!0===t&&d(a.id,{name:e.newName,number:e.newNumber}).then((function(n){console.log(n),e.setMessage("Changed phone number of: "+e.newName+" to: "+e.newNumber)})).catch((function(n){e.setMessage("Information of "+e.newName+" has already been removed from the server")}))}}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:function(n){e.setNewName(n.target.value)}}),r.a.createElement("br",null),"phone number: ",r.a.createElement("input",{onChange:function(n){e.setNumber(n.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},w=function(e){console.log("Filter Lenght",e.filter.length),console.log("Persons:",e.persons);var n=0===e.filter.length?e.persons:e.persons.filter((function(n){return n.name.includes(e.filter)}));return console.log(n),r.a.createElement("div",null,n.map((function(e,n){return r.a.createElement("li",{key:n},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete "+e.name+"?"),h(e.id).then((function(e){console.log(e)}))}(e)}},"Delete"))})))},E=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"update"},n)},N=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),i=s[0],m=s[1],b=Object(a.useState)(""),d=Object(l.a)(b,2),h=d[0],N=d[1],g=Object(a.useState)(""),v=Object(l.a)(g,2),j=v[0],O=v[1],k=Object(a.useState)(null),S=Object(l.a)(k,2),y=S[0],C=S[1];return Object(a.useEffect)((function(){f().then((function(e){o(e.data)}))}),[]),console.log("Database:",t),r.a.createElement("div",null,r.a.createElement(E,{message:y}),r.a.createElement("h2",null,"PhoneBook"),r.a.createElement(c,{setFilter:m}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(p,{persons:t,newName:h,newNumber:j,filter:i,setPersons:o,setNewName:N,setNumber:O,setMessage:C}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{filter:i,setFilter:m,persons:t}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.acca018e.chunk.js.map